---
description: Guide for creating cursor rules - standards and best practices
alwaysApply: false
---

# Guide for Creating Cursor Rules

## üìã Overview

Cursor Rules (`.mdc` files) are IDE-agnostic rules that guide AI behavior when working with code. Rules contain requirements, best practices, and useful information with possible references to other documentation, but without step-by-step instructions. Rules are stored in the `rules/` directory and can be used in Claude Code, Cursor, or any other AI coding assistant.

Rules should be:
- **IDE-agnostic**: Work with any AI coding assistant, not tied to specific IDE
- **Knowledge-focused**: Contain requirements, standards, best practices
- **Reference-friendly**: Include links to other documentation when needed
- **Instruction-free**: Avoid step-by-step instructions (those belong in commands)

## üìÅ File Structure

### YAML Frontmatter (required)

Each rule file must start with YAML frontmatter:

```yaml
---
description: Brief description of the rule's purpose
globs: file patterns for applying the rule
alwaysApply: true/false
---
```

#### Frontmatter fields:

- **`description`** (required): Brief description of the rule's purpose (1-2 sentences)
- **`globs`** (optional): Glob patterns for automatically applying the rule to matching files
  - Examples: `*.py`, `**/router.py`, `service.py,repository.py`, `**/dto/*.py`
  - Multiple patterns can be specified separated by commas
- **`alwaysApply`** (optional, default `false`): Whether to apply the rule always, regardless of open files
  - `true` - rule is always applied
  - `false` - rule is only applied when opening matching files (by globs)

### Markdown Content

After frontmatter follows Markdown content describing the rule.

## ‚úÖ Best Practices (DO)

### 1. Focus and Specificity

- ‚úÖ **One rule = one topic**: Each file should describe one specific area
- ‚úÖ **Concrete examples**: Include examples of correct and incorrect code
- ‚úÖ **Practical patterns**: Provide ready-to-use code templates

**Example:**
```markdown
## ‚úÖ Correct

```python
# Use dependency injection
@app.get("/users")
async def get_users(settings: APISettingsDep):
    return await user_service.get_all()
```

## ‚ùå Incorrect

```python
# DO NOT use global variables
from global_config import SETTINGS  # ‚ùå
```
```

### 2. Content Structure

- ‚úÖ **Use emojis for sections**: Improves readability
  - üöÄ Initialization/setup
  - üìã Configuration/settings
  - üîê Security
  - üõ† Tools/utilities
  - ‚öôÔ∏è Parameters/options
  - üìä Monitoring/statistics
  - üîß Tuning/configuration
  - ‚ùå Forbidden practices
  - ‚úÖ Recommended practices

- ‚úÖ **Heading hierarchy**: Use logical H2, H3, H4 structure
- ‚úÖ **Code blocks with language**: Always specify language in code blocks (`python`, `bash`, `sql`, etc.)

### 3. Code Examples

- ‚úÖ **Complete examples**: Provide complete, working examples
- ‚úÖ **Templates with placeholders**: Use `{Entity}`, `{entity}` for templates
- ‚úÖ **Code comments**: Add explanatory comments
- ‚úÖ **Real scenarios**: Examples should reflect real use cases

### 4. Pattern Description

- ‚úÖ **DO/DON'T sections**: Clearly separate what to do and what not to do
- ‚úÖ **Responsibility section**: Describe component/pattern responsibility
- ‚úÖ **Key Points**: Highlight key points at the end of the document

### 5. File Organization

- ‚úÖ **Logical directory structure**: Group rules by domains/technologies
  - `rules/backend/python/fastapi/` - rules for FastAPI
  - `rules/docker-infrastructure/` - rules for Docker
  - `rules/utilities/` - utilities and general rules

- ‚úÖ **Descriptive file names**: Use kebab-case
  - ‚úÖ `fastapi-settings.mdc`
  - ‚úÖ `git-workflow-standards.mdc`
  - ‚ùå `rule1.mdc`, `settings.mdc`

### 6. Length and Readability

- ‚úÖ **Optimal size**: Try to keep rules within 300-500 lines
- ‚úÖ **Split into parts**: If a rule is large, split into several related files
- ‚úÖ **Links between rules**: Use links to related rules

### 7. Currency and Versioning

- ‚úÖ **Regular updates**: Update rules when practices change
- ‚úÖ **Changelog**: Keep change history in comments (optional)

## ‚ùå Anti-patterns (DON'T)

### 1. Avoid

- ‚ùå **Too general rules**: Don't create rules like "how to write code"
- ‚ùå **Duplication**: Don't duplicate information from other rules
- ‚ùå **Outdated practices**: Don't include outdated approaches
- ‚ùå **Contradictions**: Ensure rules don't contradict each other

### 2. Structure

- ‚ùå **Missing frontmatter**: Always include YAML frontmatter
- ‚ùå **Imprecise globs**: Don't use too broad patterns (`**/*.py` for specific rules)
- ‚ùå **Unclear descriptions**: `description` should be clear and specific

### 3. Content

- ‚ùå **Abstract examples**: Avoid examples without context
- ‚ùå **Incomplete examples**: Always provide complete, working examples
- ‚ùå **Missing negative examples**: Show not only what to do, but also what not to do

### 4. Organization

- ‚ùå **Flat structures**: Don't put all rules in one directory
- ‚ùå **Unclear names**: Avoid abbreviations in file names

## üìê Standard Rule Structure

```markdown
---
description: Brief description of the rule
globs: file patterns (optional)
alwaysApply: false
---

# Rule Name

## üìã Overview / Responsibility

Brief description of the rule's purpose and scope.

## ‚úÖ DO (Recommended Practices)

### Subsection 1
Description with examples...

```python
# Example of correct code
```

### Subsection 2
...

## ‚ùå DON'T (Forbidden Practices)

### Anti-pattern 1
Description with examples...

```python
# Example of incorrect code
```

## üîß Usage Examples

Complete examples...

## üìù Key Points

- Key point 1
- Key point 2
- Key point 3
```

## üéØ Examples of Good Rules

### Example 1: Specific rule with globs

```yaml
---
description: FastAPI Settings Usage Standards
globs: service.py,router.py
alwaysApply: false
---
```

### Example 2: General rule

```yaml
---
description: Git Workflow Standards
alwaysApply: false
---
```

### Example 3: Rule with multiple patterns

```yaml
---
description: Pydantic DTO Pattern
globs: *_dto.py,dto.py
alwaysApply: false
---
```

## üîó Linking Rules

Use links to connect related rules:

```markdown
See also [FastAPI Dependencies](fastapi-dependencies.mdc) for working with dependencies.
```

## üìä Rule Creation Checklist

Before creating a new rule, ensure:

### Research Phase
- [ ] Modern best practices researched via web search
- [ ] Context7 MCP or other documentation sources checked (if applicable)
- [ ] Must-have, do, and don't practices compiled
- [ ] Current industry standards understood

### Structure Phase
- [ ] Decision made: single file vs. folder structure
- [ ] Framework-agnostic requirement considered (if applicable)
- [ ] Separation needs evaluated (multiple approaches?)

### Content Phase
- [ ] YAML frontmatter with `description` is created
- [ ] Correct `globs` are specified (if needed)
- [ ] Rule is focused on one topic
- [ ] Examples of correct code (‚úÖ) are included
- [ ] Examples of incorrect code (‚ùå) are included
- [ ] Emojis are used for sections
- [ ] Code examples are complete and working
- [ ] File has descriptive name in kebab-case
- [ ] File is placed in correct directory
- [ ] Rule doesn't duplicate existing rules
- [ ] Key Points section is added (with Must Have, Do, Don't subsections)
- [ ] Links to related rules are added (if any)
- [ ] Framework-agnostic approach maintained (if required)

## üöÄ Rule Creation Process

### Phase 1: Research and Information Gathering

Before creating a rule, research and gather information:

1. **Research modern best practices**: Use web search to find current industry standards
2. **Check documentation sources**: Check if latest documentation is available in context7 MCP or other sources (if applicable)
3. **Compile practices list**: Gather must-have, do, and don't practices
4. **Understand standards**: Understand current industry standards and conventions

### Phase 2: Structural Decisions

Make decisions about rule structure:

1. **Single file vs. folder**: Determine if rule should be universal (single file) or separated (folder with multiple files)
   - Consider if different approaches exist that warrant separation
   - Decide: single `rule-name.mdc` file OR `rule-name/` folder with multiple `.mdc` files
2. **Framework-agnostic**: If framework-agnostic rule is needed, ensure it doesn't reference specific frameworks
3. **Separation criteria**: Consider creating a folder with multiple files when:
   - Multiple distinct approaches exist (e.g., different methodologies)
   - Rules would be too long (>500 lines) as single file
   - Different use cases require different guidelines
   - Otherwise, create a single universal rule file

### Phase 3: Planning

Plan the rule structure:

1. **Determine rule name**: Use kebab-case (e.g., `html.mdc`, `fastapi-settings.mdc`)
2. **Determine target directory**: Choose appropriate directory (e.g., `backend/python/fastapi/`, `frontend/`, `utilities/`, `documentation/`)
3. **Identify related rules**: Find related rules for linking
4. **Define globs patterns**: Determine file patterns if rule should apply to specific files
5. **Set alwaysApply flag**: Decide if rule should always apply or only for specific files

### Phase 4: Clarification

Clarify details with user if unclear:

- Rule name and purpose
- Structure decision (single file vs. folder)
- Framework requirement (framework-agnostic vs. framework-specific)
- Target files (for globs)
- Always apply setting
- Related rules
- Examples needed
- Duplication warning (if similar rule exists)

### Phase 5: Creation

Create the rule:

1. **Create directory structure**: Create directories if needed
2. **Create file with YAML frontmatter**: Include description, globs, alwaysApply
3. **Add content**: Follow standard rule structure
4. **Include examples**: Add comprehensive examples (‚úÖ correct, ‚ùå incorrect)

### Phase 6: Verification

Verify compliance:

1. **Check structure**: Ensure all sections are present (DO, DON'T, Key Points, etc.)
2. **Validate examples**: Check code examples are complete and working
3. **Validate links**: Check links to related rules
4. **Go through checklist**: Verify all checklist items are met

## ü§ñ AI Agent Optimization

To make rules more effective for AI agents:

1. **Clear structure**: Use consistent section headings and emojis for easy parsing
2. **Explicit examples**: Provide complete, working code examples (not snippets)
3. **Negative examples**: Always include ‚ùå incorrect examples alongside ‚úÖ correct ones
4. **Key Points summary**: Include Must Have, Do, Don't subsections in Key Points
5. **Metadata**: Ensure YAML frontmatter is complete and accurate
6. **Links**: Link to related rules to help AI understand context
7. **Framework-agnostic**: When creating universal rules, avoid framework-specific syntax
8. **Research-based**: Base rules on current best practices, not outdated information

## üéØ Special Cases

### Framework-Agnostic Rules

When creating framework-agnostic rules (e.g., HTML, CSS, general patterns):
- Focus on core technology, not framework-specific implementations
- Use vanilla/standard syntax in examples
- Note that framework-specific rules will be created separately
- Example: `rules/frontend/html.mdc` (framework-agnostic) vs. `rules/frontend/react/html-in-jsx.mdc` (framework-specific)

### Rule Separation Decision

Consider creating a folder with multiple files when:
- Multiple distinct approaches exist (e.g., different methodologies)
- Rules would be too long (>500 lines) as single file
- Different use cases require different guidelines

Otherwise, create a single universal rule file.

## ‚ùå Constraints

When creating rules:

- DO NOT create rules without researching modern best practices first
- DO NOT use abstract formulations ("how to write code")
- DO NOT create rules that duplicate existing rules
- DO NOT forget YAML frontmatter
- DO NOT use unclear file names
- DO NOT create rules without code examples
- DO NOT forget to include both DO and DON'T sections
- DO NOT skip research phase - always gather current best practices
- DO NOT create framework-specific rules when framework-agnostic is requested
- DO NOT make structural decisions without considering separation needs

## üìö Additional Resources

- Official Cursor IDE documentation
- Existing rules in `rules/` for examples
- Best practices from developer community

---

**Remember**: A good rule is a specific, clear, and practical guide that helps AI generate quality code that follows project standards. Rules should be IDE-agnostic and contain requirements and useful information with possible references to other documentation, but without step-by-step instructions.