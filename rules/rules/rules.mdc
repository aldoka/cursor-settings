---
description: Guide for creating rules for LLM agents
globs: .cursor/rules/**
alwaysApply: false
---
# Guide for Creating Cursor Rules

## üìã Overview

Cursor Rules (`.mdc` files) are IDE-agnostic rules that guide AI behavior when working with code. Rules contain requirements, best practices, and useful information with possible references to other documentation, but without step-by-step instructions. Rules are stored in the `rules/` directory and can be used in Claude Code, Cursor, or any other AI coding assistant.

Rules should be:
- **IDE-agnostic**: Work with any AI coding assistant, not tied to specific IDE
- **Knowledge-focused**: Contain requirements, standards, best practices
- **Reference-friendly**: Include links to other documentation when needed
- **Instruction-free**: Avoid step-by-step instructions (those belong in commands)

## üìÅ File Structure

### YAML Frontmatter (required)

Each rule file must start with YAML frontmatter:

```yaml
---
description: Brief description of the rule's purpose
globs: file patterns for applying the rule
alwaysApply: true/false
---
```

#### Frontmatter fields:

- **`description`** (required): Brief description of the rule's purpose (1-2 sentences)
- **`globs`** (optional): Glob patterns for automatically applying the rule to matching files
  - Examples: `*.py`, `**/router.py`, `service.py,repository.py`, `**/dto/*.py`
  - Multiple patterns can be specified separated by commas
- **`alwaysApply`** (optional, default `false`): Whether to apply the rule always, regardless of open files
  - `true` - rule is always applied
  - `false` - rule is only applied when opening matching files (by globs)

### Markdown Content

After frontmatter follows Markdown content describing the rule.

## üìê Standard Rule Structure

```markdown
---
description: Brief description of the rule
globs: file patterns (optional)
alwaysApply: false
---

# Rule Name

## üìã Overview / Responsibility

Brief description of the rule's purpose and scope.

## üìã Table of Contents
1. üéØ Core Principles
  - 1.1. [Point 1](#11-point-1)
2. ‚úÖ DO (Recommended Practices)
  - 2.1. [Subsection 1](#21-subsection-1)
3. ‚ùå DON'T (Forbidden Practices)
  - 3.1. [Anti-pattern 1](#31-anti-pattern-1)
4. üìù Key Points
  - 4.1. [Checklist](#41-checklist)
  - 4.2. [Must Have](#42-must-have)
  - 4.3. [Do](#43-do)
  - 4.4. [Don't](#44-dont)
5. üìö References
  - 5.1. [Related rules](#51-related-rules)

# 1. üéØ Core Principles

### 1.1. [Point 1](#11-point-1)

...


## 2. ‚úÖ DO (Recommended Practices)

### 2.1 Subsection 1
Description with examples...

# Example of correct code

## 3. ‚ùå DON'T (Forbidden Practices)

### 3.1. Anti-pattern 1
Description with examples...

# Example of incorrect code

## 4. üìù Key Points

### 4.1. Checklist
- [ ] Checklist item 1

### 4.2. Must Have
- Key point 1

### 4.3. Do
- Do item 1

### 4.4. Don't
- Don't item 1

## 5. üìö References

### 5.1. Related rules
- [Related rule 1](#51-related-rule-1)
```

## üöÄ Rule Creation Process

### Phase 1: Research and Information Gathering

Before creating a rule, research and gather information:

1. **Research modern best practices**: Use web search to find latest industry standards, conventions and best practices
2. **Check documentation sources**: Check if latest documentation is available in context7 MCP or other sources (if applicable)
3. **Compile practices list**: Gather must-have, do, and don't practices

### Phase 2: Structural Decisions

Make decisions about rule structure and type:

1. **Single file vs. folder**: Determine if rule should be universal (single file) or separated (folder with multiple files)
   - Consider if different approaches exist that warrant separation
   - Decide: single `rule-name.mdc` file OR `rule-name/` folder with multiple `.mdc` files
2. **Rule type**: Determine if rule should be **common/framework-agnostic** or **specific/detailed**
   - **Common/framework-agnostic rules**: Universal principles, technology-agnostic patterns, general best practices
     - Examples must use vanilla/standard syntax (framework-agnostic)
     - Can reference framework-specific rules via links for detailed implementations
     - Focus on concepts and principles, not framework-specific implementations
   - **Specific/detailed rules**: Framework-specific implementations, detailed use cases, concrete patterns
     - Include framework-specific syntax and patterns in examples
     - Provide complete, working implementations
     - Reference for common rule for basic context
   - This decision affects the level of detail in examples (see Code Examples section)
3. **Separation approach**: For complex rules, consider using hierarchical separation approach (common rules + detailed rules)
   - See [Rule Separation Guide](rules-separation.mdc) for detailed guidance

### Phase 3: Planning

Plan the rule structure:

1. **Determine rule name**: Use kebab-case (e.g., `html.mdc`, `fastapi-settings.mdc`)
2. **Determine target directory**: Choose appropriate directory (e.g., `backend/python/fastapi/`, `frontend/`, `utilities/`, `documentation/`)
3. **Identify related rules**: Find related rules for linking
4. **Define globs patterns**: Determine file patterns if rule should apply to specific files
5. **Set alwaysApply flag**: Decide if rule should always apply or only for specific files

### Phase 4: Clarification

Clarify details with user if unclear:

- Rule name and purpose
- Structure decision (single file vs. folder)
- Rule type (common/framework-agnostic vs. specific/detailed)
- Target files (for globs)
- Related rules
- Duplication warning (if similar rule exists)

### Phase 5: Creation

Create the rule:

1. **Create directory structure**: Create directories if needed
2. **Create file with YAML frontmatter**: Include description, globs, alwaysApply
3. **Add content**: Follow standard rule structure
4. **Include examples**: Add examples matching rule type
   - **Common/framework-agnostic rules**: Simplified, minimal examples (remove unnecessary details, skip self-explanatory ones)
   - **Specific/detailed rules**: Complete, working examples (‚úÖ correct, ‚ùå incorrect)

### Phase 6: Verification

Verify compliance:

1. **Check structure**: Ensure all sections are present (DO, DON'T, Key Points, etc.)
2. **Validate examples**: Check code examples match rule type
   - **Common rules**: Examples are simplified, minimal, no unnecessary details
   - **Specific rules**: Examples are complete and working
3. **Validate links**: Check links to related rules (or TODO if detailed rule doesn't exist)
4. **Go through checklist**: Verify all checklist items are met


## ‚úÖ Best Practices (DO)

### 1. Focus and Specificity

- ‚úÖ **One rule = one topic**: Each file should describe one specific area
- ‚úÖ **Concrete examples**: Include examples of correct and incorrect code
- ‚úÖ **Practical patterns**: Provide ready-to-use code templates

### 2. Content Structure

- ‚úÖ **Use emojis for sections**: Improves readability
  - üöÄ Initialization/setup
  - üìã Configuration/settings
  - üîê Security
  - üõ† Tools/utilities
  - ‚öôÔ∏è Parameters/options
  - üìä Monitoring/statistics
  - üîß Tuning/configuration
  - ‚ùå Forbidden practices
  - ‚úÖ Recommended practices

- ‚úÖ **Heading hierarchy**: Use logical H2, H3, H4 structure
- ‚úÖ **Code blocks with language**: Always specify language in code blocks (`python`, `bash`, `sql`, etc.)

### 3. Code Examples

**Important**: Example detail level depends on rule type:

#### For Common/Framework-Agnostic Rules:
- ‚úÖ **Simplified examples**: Remove unnecessary details that don't illustrate the current point
- ‚úÖ **Minimal variants**: Show only the minimum necessary to demonstrate the concept, not all possible variants
- ‚úÖ **Remove self-explanatory examples**: If the text is clear (e.g., "Don't exceed 7 main items"), no example needed
- ‚úÖ **Reference detailed rules**: Link to more specific rules for detailed implementations (if they exist, otherwise leave TODO)
- ‚úÖ **Vanilla code**: Use vanilla/standard syntax, refer to framework-specific rules for real implementations
- ‚úÖ **Focus on concept**: Examples should illustrate the principle, not provide complete production-ready code

#### For Specific/Detailed Rules:
- ‚úÖ **Complete examples**: Provide complete, working examples
- ‚úÖ **Comprehensive coverage**: Include all necessary details for implementation
- ‚úÖ **Real scenarios**: Examples should reflect real use cases
- ‚úÖ **Framework-specific**: Include framework-specific syntax and patterns

#### General Guidelines:
- ‚úÖ **Templates with placeholders**: Use `{Entity}`, `{entity}` for templates
- ‚úÖ **Code comments**: Add explanatory comments where needed
- ‚úÖ **Avoid duplication**: If a more detailed rule exists, reference it instead of duplicating examples

### 4. Pattern Description

- ‚úÖ **DO/DON'T sections**: Clearly separate what to do and what not to do
- ‚úÖ **Responsibility section**: Describe component/pattern responsibility
- ‚úÖ **Summary section**: Include summary or checklist at the end of the document

### 5. File Organization

- ‚úÖ **Logical directory structure**: Group rules by domains/technologies
  - `rules/backend/python/fastapi/` - rules for FastAPI
  - `rules/docker-infrastructure/` - rules for Docker
  - `rules/utilities/` - utilities and general rules

- ‚úÖ **Descriptive file names**: Use kebab-case
  - ‚úÖ `fastapi-settings.mdc`
  - ‚úÖ `git-workflow-standards.mdc`
  - ‚ùå `rule1.mdc`, `settings.mdc`

### 6. Length and Readability

- ‚úÖ **Optimal size**: Try to keep rules within 300-500 lines
- ‚úÖ **Split into parts**: If a rule is large, split into several related files
- ‚úÖ **Links between rules**: Use links to related rules

### 7. Currency

- ‚úÖ **Regular updates**: Update rules when practices change

### 8. Rule Separation

For complex rules, consider using hierarchical separation approach (common rules + detailed rules). See [Rule Separation Guide](rules-separation.mdc) for detailed guidance.

### 9. AI Agent Optimization

To make rules more effective for AI agents:

- ‚úÖ **Clear structure**: Use consistent section headings and emojis for easy parsing
- ‚úÖ **Explicit examples**: Provide examples matching rule type
  - **Common rules**: Simplified examples illustrating concepts (not full implementations)
  - **Specific rules**: Complete, working code examples (not snippets)
- ‚úÖ **Negative examples**: Always include ‚ùå incorrect examples alongside ‚úÖ correct ones
- ‚úÖ **Summary section**: Include summary or checklist for quick reference
- ‚úÖ **Metadata**: Ensure YAML frontmatter is complete and accurate
- ‚úÖ **Links**: Link to related rules to help AI understand context
- ‚úÖ **Framework-agnostic**: When creating universal rules, avoid framework-specific syntax
- ‚úÖ **Research-based**: Base rules on current best practices, not outdated information

### 10. Framework-Agnostic Rules

When creating framework-agnostic rules (e.g., HTML, CSS, general patterns):

- ‚úÖ **Focus on core technology**: Not framework-specific implementations
- ‚úÖ **Use vanilla syntax**: Use vanilla/standard syntax in examples
- ‚úÖ **Simplified examples**: Keep examples minimal - remove extra details not needed to explain the current point
  - Example: Don't include full CSS with colors unless describing color usage
  - Example: Don't show all possible variants, just the minimum to illustrate the concept
- ‚úÖ **Self-explanatory points**: Skip examples if the text itself is clear (e.g., "Don't exceed 7 main items")
- ‚úÖ **Reference detailed rules**: Link to more specific rules for detailed implementations
  - If detailed rule doesn't exist yet, leave a TODO comment
- ‚úÖ **Separate framework rules**: Note that framework-specific rules will be created separately
- ‚úÖ **Example naming**: `rules/frontend/html.mdc` (framework-agnostic) vs. `rules/frontend/react/html-in-jsx.mdc` (framework-specific)

## ‚ùå Anti-patterns (DON'T)

### 1. Avoid

- ‚ùå **Too general rules**: Don't create rules like "how to write code"
- ‚ùå **Duplication**: Don't duplicate information from other rules
- ‚ùå **Outdated practices**: Don't include outdated approaches
- ‚ùå **Contradictions**: Ensure rules don't contradict each other
- ‚ùå **Skip research phase**: Don't create rules without researching modern best practices first
- ‚ùå **Framework mismatch**: Don't create framework-specific rules when framework-agnostic is requested

### 2. Structure

- ‚ùå **Missing frontmatter**: Always include YAML frontmatter
- ‚ùå **Imprecise globs**: Don't use too broad patterns (`**/*.py` for specific rules)
- ‚ùå **Unclear descriptions**: `description` should be clear and specific

### 3. Content

- ‚ùå **Abstract examples**: Avoid examples without context
- ‚ùå **Overly detailed examples in common rules**: Don't include excessive details in framework-agnostic rules
- ‚ùå **All variants shown**: Don't show all possible variants in examples - keep it minimal
- ‚ùå **Self-explanatory examples**: Don't add examples when the text itself is clear
- ‚ùå **Incomplete examples in specific rules**: Specific rules should have complete, working examples
- ‚ùå **Missing negative examples**: Show not only what to do, but also what not to do
- ‚ùå **Missing code examples**: Don't create rules without code examples (unless text is self-explanatory)
- ‚ùå **Missing DO/DON'T sections**: Don't forget to include both DO and DON'T sections
- ‚ùå **Duplicating examples**: Don't duplicate examples from detailed rules - reference them instead

### 4. Organization

- ‚ùå **Flat structures**: Don't put all rules in one directory
- ‚ùå **Unclear names**: Avoid abbreviations in file names
- ‚ùå **Structural decisions without analysis**: Don't make structural decisions without considering separation needs


## üìä Rule Creation Checklist

Before creating a new rule, ensure:

### Research Phase
- [ ] Modern best practices researched via web search
- [ ] Context7 MCP or other documentation sources checked (if applicable)
- [ ] Must-have, do, and don't practices compiled
- [ ] Current industry standards understood

### Structure Phase
- [ ] Decision made: single file vs. folder structure
- [ ] Rule type determined (common/framework-agnostic vs. specific/detailed)
- [ ] Framework-agnostic requirement considered (if applicable)
- [ ] Separation needs evaluated (multiple approaches?)

### Content Phase
- [ ] YAML frontmatter with `description` is created
- [ ] Correct `globs` are specified (if needed)
- [ ] Rule type determined (common/framework-agnostic vs. specific/detailed)
- [ ] Rule is focused on one topic
- [ ] Examples of correct code (‚úÖ) are included (unless self-explanatory)
- [ ] Examples of incorrect code (‚ùå) are included
- [ ] DO and DON'T sections are clearly separated
- [ ] Logical heading hierarchy (H2, H3, H4) is used
- [ ] Code blocks have specified language
- [ ] Emojis are used for sections
- [ ] Code examples match rule type:
  - [ ] Common rules: simplified, minimal examples
  - [ ] Specific rules: complete, working examples
- [ ] Code examples include explanatory comments (where needed)
- [ ] Templates with placeholders are used (if applicable)
- [ ] Self-explanatory points don't have unnecessary examples
- [ ] Examples don't show all variants, only minimum necessary
- [ ] Links to detailed rules added (or TODO if detailed rule doesn't exist)
- [ ] Rule size is within 300-500 lines (or split if larger)
- [ ] File has descriptive name in kebab-case
- [ ] File is placed in correct directory (logical structure)
- [ ] Rule doesn't duplicate existing rules
- [ ] Links to related rules are added (if any)
- [ ] Framework-agnostic approach maintained (if required)

## üìö Related Detailed Rules

For specific implementation cases, see:
- [Rule Separation Guide](rules-separation.mdc) - Hierarchical separation approach, two-layer structure, decision criteria, and best practices

---

**Remember**: A good rule is a specific, clear, and practical guide that helps AI generate quality code that follows project standards. Rules should be IDE-agnostic and contain requirements and useful information with possible references to other documentation, but without step-by-step instructions.
